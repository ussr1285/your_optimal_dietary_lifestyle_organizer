<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team 9 - YOLO</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
    <div class="container">
        <h1>건강한 식단 관리의 시작, YOLO</h1>
        <div class="meal-sections">
            <div class="meal-section">
                <form id="breakfast-form" enctype="multipart/form-data">
                    <label class="custom-file-upload">
                        <input type="file" name="file" id="breakfast-file" accept="image/*"
                            onchange="previewImage(event, 'breakfastPreview', 'breakfast')">
                        <img id="breakfastPreview" class="image-preview" src="{{ image_path.breakfast }}" alt="아침 식사 이미지 없음">
                    </label>
                </form>
            </div>
            <div class="meal-section">
                <form id="lunch-form" enctype="multipart/form-data">
                    <label class="custom-file-upload">
                        <input type="file" name="file" id="lunch-file" accept="image/*"
                            onchange="previewImage(event, 'lunchPreview', 'lunch')">
                        <img id="lunchPreview" class="image-preview" src="{{ image_path.lunch }}" alt="점심 식사 이미지 없음">
                    </label>
                </form>
            </div>
            <div class="meal-section">
                <form id="dinner-form" enctype="multipart/form-data">
                    <label class="custom-file-upload">
                        <input type="file" name="file" id="dinner-file" accept="image/*"
                            onchange="previewImage(event, 'dinnerPreview', 'dinner')">
                        <img id="dinnerPreview" class="image-preview" src="{{ image_path.dinner }}" alt="저녁 식사 이미지 없음">
                    </label>
                </form>
            </div>
        </div>
        
        <form id="mealForm" action="{{ url_for('submit') }}" method="post" enctype="multipart/form-data">
            <!---<button type="submit" onclick="showResults()">오늘의 식사 분석</button>--->
            <div class="results-container2">
                <div class="result-content-box">
                    <h3>오늘의 영양 성분</h3>
                    <p>
                        칼로리 : {{ food.today.kcal }}, 단백질 : {{ food.today.protein }}, 
                        지방 : {{ food.today.fat }}, 탄수화물 : {{ food.today.carb }}, 
                        당류 : {{ food.today.sugars }}, 나트륨 : {{ food.today.sodium }}
                    </p>
                </div>
                <div class="result-content-box">
                    <h3>더 필요한 영양분</h3>
                    <p>
                        칼로리 : {{ food.need.kcal }}, 단백질 : {{ food.need.protein }}, 
                        지방 : {{ food.need.fat }}, 탄수화물 : {{ food.need.carb }}, 
                        당류 : {{ food.need.sugars }}, 나트륨 : {{ food.need.sodium }}
                    </p>
                    <a href="{{ url_for('home') }}">Go back</a>
                </div>
        </form>
        <div class="result-content-box">
            <p>아침 : {{ food.breakfast.name }}, 점심 : {{ food.lunch.name }}, 저녁 : {{ food.dinner.name }}</p>
            <!--
            <p>
                칼로리 : {{ food.breakfast.kcal }}, 단백질 : {{ food.breakfast.protein }}, 
                지방 : {{ food.breakfast.fat }}, 탄수화물 : {{ food.breakfast.carb }}, 
                당류 : {{ food.breakfast.sugars }}, 나트륨 : {{ food.breakfast.sodium }}
            </p>
            <p>
                칼로리 : {{ food.lunch.kcal }}, 단백질 : {{ food.lunch.protein }}, 
                지방 : {{ food.lunch.fat }}, 탄수화물 : {{ food.lunch.carb }}, 
                당류 : {{ food.lunch.sugars }}, 나트륨 : {{ food.lunch.sodium }}
            </p>
            <p>
                칼로리 : {{ food.dinner.kcal }}, 단백질 : {{ food.dinner.protein }}, 
                지방 : {{ food.dinner.fat }}, 탄수화물 : {{ food.dinner.carb }}, 
                당류 : {{ food.dinner.sugars }}, 나트륨 : {{ food.dinner.sodium }}
            </p>
            <p>
                칼로리 : {{ food.need.kcal }}, 단백질 : {{ food.need.protein }}, 
                지방 : {{ food.need.fat }}, 탄수화물 : {{ food.need.carb }}, 
                당류 : {{ food.need.sugars }}, 나트륨 : {{ food.need.sodium }}
            </p>
            -->
            <p>
                추천1 : {{ food.recommend.one }}, 추천2 : {{ food.recommend.two }}, 추천3 : {{ food.recommend.three }}
            </p>
        </div>
    </div>
    </div>

    <script>
        function previewImage(event, previewId, meal) {
            // var reader = new FileReader();
            // reader.onload = function () {
            //     var output = document.getElementById(previewId);
            //     output.src = reader.result;
            //     output.style.display = 'block';
            // }
            // reader.readAsDataURL(event.target.files[0]);
        //     var form = document.getElementById(meal + '-form');
        //     var formData = new FormData(form);
        //     var xhr = new XMLHttpRequest();
        //     xhr.open('POST', '/upload/' + meal, true);
        //     xhr.send(formData);
           1+1;
        }

        function showResults() {
            document.getElementById("today-nutrition").style.display = "block";
            document.getElementById("essential-info").style.display = "block";
            document.getElementById("tomorrow-recommendation").style.display = "block";
        }
    </script>
</body>

</html>